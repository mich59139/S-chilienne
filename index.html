<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>S√©chilienne ‚Äî Des fondations √† 1815 (pr√©-rempli)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    .no-scrollbar::-webkit-scrollbar{ display:none; }
    .no-scrollbar{ -ms-overflow-style:none; scrollbar-width:none; }
    #map { height: 26rem; }
    @media (min-width: 768px){ #map { height: 32rem; } }
    .leaflet-control-layers-expanded { max-height: 220px; overflow:auto; }
    .prose p{ margin: .4rem 0; }
  </style>
</head>
<body class="min-h-screen bg-[radial-gradient(ellipse_at_top,_#f6f2ea,_#ece7df)] text-neutral-900">
  <div id="root"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>

  <script type="text/babel">
    // ---------------- Donn√©es (fondations ‚Üí 1815) ----------------
    const ERAS = [
      { id: "all", label: "Tout" },
      { id: "antiquite", label: "Antiquit√©" },
      { id: "moyenage", label: "Moyen √Çge" },
      { id: "modernes", label: "Temps modernes" },
      { id: "revolution", label: "R√©volution & Empire" },
    ];

    const EVENTS = [
      // Antiquit√© (voies & premiers peuplements attestables r√©gionalement)
      { id:"ant-1", year:"Ier‚ÄìIVe s.", era:"antiquite", title:"Voie romaine de la Romanche",
        summary:"Itin√©raire antique reliant la cuvette grenobloise au haut Oisans. Des tron√ßons sont encore visibles en vall√©e (√† sourcer et illustrer).",
        tags:["patrimoine","arch√©o","voie"] },

      // Moyen √Çge : seigneuries locales + contexte delphinal
      { id:"ma-0", year:"XIIe‚ÄìXIIIe s.", era:"moyenage", title:"Structuration paroissiale & ch√¢tellenies",
        summary:"Autour de l'√©glise et des hameaux, la communaut√© se fixe ; la seigneurie locale s'affirme (√† documenter par chartes).",
        tags:["paroisse","fiefs"] },

      { id:"ma-1", year:"v. 1195‚Äì1248", era:"moyenage", title:"Guigues I·µâ ≥ Alleman",
        summary:"Premier seigneur de S√©chilienne attest√©. Point de d√©part de la chronologie seigneuriale locale.",
        tags:["seigneurs","Alleman"] },

      { id:"ma-2", year:"XIIIe‚ÄìXIVe s.", era:"moyenage", title:"Maisons et alliances (Alleman)",
        summary:"Alliances, hommages et partages fa√ßonnent le pouvoir local. (Lignes √† pr√©ciser : dots, co-seigneuries, possessions).",
        tags:["g√©n√©alogie","Alleman"] },

      { id:"ma-3", year:"1349", era:"moyenage", title:"Transport du Dauphin√© √† la France",
        summary:"Le Dauphin√© passe sous l'autorit√© du roi de France. Effets progressifs sur la justice, la fiscalit√© et l'encadrement administratif.",
        tags:["contexte","Dauphin√©"] },

      // Temps modernes : bascule des maisons, pression des grands voisins, Lesdigui√®res
      { id:"tm-1", year:"XVIe s.", era:"modernes", title:"Transmission Alleman ‚Üí Simiane",
        summary:"Par h√©ritages et alliances, des droits passent aux Simiane (√† sourcer par actes notari√©s et hommages).",
        tags:["Simiane","transmission"] },

      { id:"tm-2", year:"XVIIe s.", era:"modernes", title:"Maison du Mottet",
        summary:"Mont√©e en puissance locale ; toponymie (Croix du Mottet) et gestion des terroirs (√† pr√©ciser).",
        tags:["du Mottet","toponymie"] },

      { id:"tm-3", year:"v. 1590‚Äì1620", era:"modernes", title:"Lesdigui√®res et les √©quilibres locaux",
        summary:"Le conn√©table de Lesdigui√®res, puissant √† Vizille, p√®se sur la zone. S√©chilienne affirme ses marges d'autonomie dans ce contexte (√† v√©rifier).",
        tags:["Lesdigui√®res","Vizille"] },

      // R√©volution & Empire : cadre communal et r√©formes
      { id:"re-1", year:"1789", era:"revolution", title:"Nuit du 4 ao√ªt : fin des droits f√©odaux",
        summary:"Abolition des redevances seigneuriales. Effets √† S√©chilienne √† pr√©ciser (terres, cens, banalit√©s).",
        tags:["R√©volution","droits"] },

      { id:"re-2", year:"1790", era:"revolution", title:"Cr√©ation de la commune (Is√®re)",
        summary:"Nouvel √©chelon administratif ; naissance de la municipalit√© moderne et des registres d'√©tat civil.",
        tags:["commune","Is√®re"] },

      { id:"re-3", year:"1791‚Äì1793", era:"revolution", title:"Biens nationaux",
        summary:"Vente des biens eccl√©siastiques et seigneuriaux ; recomposition fonci√®re locale (√† sourcer dans les ADI).",
        tags:["biens nationaux"] },

      { id:"re-4", year:"7 mars 1815", era:"revolution", title:"Route Napol√©on (Laffrey, proximit√©)",
        summary:"Le retour de Napol√©on passe par Laffrey ; impact r√©gional (Cent-Jours) √† recontextualiser pour S√©chilienne.",
        tags:["Napol√©on","Cent-Jours"] },
    ];

    // Rep√®res cartographiques (√† remplacer par vos coordonn√©es exactes)
    const POIS = [
      { id:"voie",   name:"Voie romaine (tron√ßon)",    lat:45.055, lng:5.820, kind:"patrimoine", note:"Segment visible √† photographier / sourcer" },
      { id:"eglise", name:"√âglise / noyau paroissial", lat:45.048, lng:5.839, kind:"patrimoine", note:"Ancrage m√©di√©val (√† pr√©ciser)" },
      { id:"chat",   name:"Ch√¢teau de S√©chilienne",    lat:45.053, lng:5.840, kind:"patrimoine", note:"Existence ant√©rieure (incendie 1944 hors p√©riode)" },
      { id:"mottet", name:"Croix du Mottet",           lat:45.045, lng:5.850, kind:"m√©moire",    note:"Toponyme li√© √† la maison du Mottet (m√©moire ult√©rieure)" },
      { id:"viz",    name:"Laffrey (route Napol√©on)",  lat:45.036, lng:5.795, kind:"contexte",   note:"7 mars 1815, rencontre" },
    ];

    const FAMILIES = [
      { name:"Alleman",  period:"XIIIe‚ÄìXIVe",  note:"Lign√©e seigneuriale initiale (√† sourcer : Guigues I·µâ ≥ Alleman, hommages, partages)." },
      { name:"Simiane",  period:"XVIe",        note:"Transmission par alliances / h√©ritages (filiations √† pr√©ciser)." },
      { name:"du Mottet",period:"XVIIe‚ÄìXVIIIe",note:"Gestion des terroirs et toponymie (Croix du Mottet). R√¥le politique local √† √©clairer." },
    ];

    // ---------------- UI helpers ----------------
    const Pill = ({ active, children, onClick }) => (
      <button onClick={onClick} className={`px-3 py-1 rounded-full text-sm transition-all border ${active ? 'bg-black/90 text-white border-black shadow' : 'bg-white/70 backdrop-blur border-black/10 hover:bg-white'}`}>{children}</button>
    );

    const Card = ({ children, className='' }) => (
      <div className={`rounded-2xl border border-black/10 bg-white/80 backdrop-blur shadow-sm ${className}`}>{children}</div>
    );

    const SectionTitle = ({ icon, title, subtitle }) => (
      <div className="flex items-end justify-between gap-4">
        <div>
          <h2 className="text-2xl md:text-3xl font-semibold tracking-tight flex items-center gap-3">
            <span className="inline-flex h-9 w-9 items-center justify-center rounded-xl border border-black/10 bg-white/70">{icon}</span>
            {title}
          </h2>
          {subtitle && <p className="text-sm text-black/60 mt-1">{subtitle}</p>}
        </div>
      </div>
    );

    // ---------------- Carte ----------------
    function CarteLeaflet({ pois }){
      const mapRef = React.useRef(null);
      React.useEffect(() => {
        const map = L.map(mapRef.current).setView([45.050, 5.840], 12);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19,
          attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        const groups = {};
        const markers = [];
        pois.forEach(p => {
          const color = p.kind === 'patrimoine' ? '#1f2937' : p.kind === 'm√©moire' ? '#7c2d12' : '#0f172a';
          const icon = L.divIcon({
            className: 'custom-pin',
            html: `<span style="display:inline-block;width:12px;height:12px;border-radius:9999px;background:${color};border:2px solid #fff;box-shadow:0 0 0 2px rgba(0,0,0,.15)"></span>`,
            iconSize: [14,14], iconAnchor: [7,7]
          });
          const m = L.marker([p.lat, p.lng], { icon }).bindPopup(`<strong>${p.name}</strong><br/><small>${p.kind}</small><br/>${p.note}`);
          (groups[p.kind] ||= L.layerGroup()).addLayer(m);
          markers.push(m);
        });
        Object.entries(groups).forEach(([k,g]) => g.addTo(map));
        L.control.layers({}, groups, { collapsed:false }).addTo(map);
        if(markers.length){ map.fitBounds(L.featureGroup(markers).getBounds().pad(0.2)); }
        return () => map.remove();
      }, [pois]);

      return (
        <Card className="p-4 md:p-6">
          <SectionTitle icon={<span>üó∫Ô∏è</span>} title="Carte (rep√®res historiques)" subtitle="Positions indicatives ‚Äî remplacez par vos coordonn√©es exactes."/>
          <div id="map" ref={mapRef} className="rounded-2xl border border-black/10 overflow-hidden"></div>
        </Card>
      );
    }

    // ---------------- Frise ----------------
    function Frise({ events, eraFilter }){
      const data = React.useMemo(() => events.filter(e => eraFilter === 'all' || e.era === eraFilter), [events, eraFilter]);
      return (
        <Card className="p-4 md:p-6">
          <SectionTitle icon={<span>üï∞Ô∏è</span>} title="Frise (fondations ‚Üí 1815)" subtitle="Jalons principaux, cliquables vers fiches √† venir."/>
          <div className="mt-4 overflow-x-auto no-scrollbar">
            <div className="flex gap-4 min-w-max pr-4">
              {data.map(e => (
                <div key={e.id} className="w-80 shrink-0">
                  <div className="h-full rounded-2xl border border-black/10 bg-gradient-to-b from-white to-white/60 p-4 hover:shadow-md transition-shadow">
                    <div className="text-xs tracking-wide uppercase text-black/60">{e.year}</div>
                    <div className="mt-1 text-lg font-semibold">{e.title}</div>
                    <p className="mt-2 text-sm text-black/70 leading-relaxed">{e.summary}</p>
                    <div className="mt-3 flex flex-wrap gap-2">
                      {e.tags.map(t => <span key={t} className="px-2 py-0.5 text-xs rounded-full border border-black/10 bg-white/70">{t}</span>)}
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </Card>
      );
    }

    // ---------------- Encadr√© focus ----------------
    function FocusAutonomie(){
      return (
        <Card className="p-4 md:p-6">
          <SectionTitle icon={<span>üè∞</span>} title="S√©chilienne & sa ¬´ grande voisine ¬ª" subtitle="Autonomie locale, familles nobles et Lesdigui√®res (√† documenter)"/>
          <div className="prose text-sm text-black/80">
            <p><strong>Hypoth√®se de lecture</strong> : entre le XVIe et le XVIIe si√®cle, l'√©quilibre entre les droits des maisons locales (Alleman ‚Üí Simiane ‚Üí du Mottet) et l'influence du <em>conn√©table de Lesdigui√®res</em>, install√© √† Vizille, conditionne l'autonomie de S√©chilienne.</p>
            <p><em>√Ä v√©rifier par les actes</em> : hommages, cens, banalit√©s, droits de justice, partages et limites territoriales. Un encadr√© comparatif pourrait montrer les pr√©rogatives respectives et leur √©volution jusqu'√† la R√©volution.</p>
          </div>
        </Card>
      );
    }

    // ---------------- G√©n√©alogies ----------------
    function Genealogies({ families }){
      return (
        <Card className="p-4 md:p-6">
          <SectionTitle icon={<span>üå≥</span>} title="Maisons seigneuriales" subtitle="Alleman ‚Üí Simiane ‚Üí du Mottet (sch√©ma simplifi√©)."/>
          <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 items-start">
            {families.map((f, idx) => (
              <div key={f.name} className="relative">
                {idx < families.length - 1 && <div className="hidden md:block absolute top-10 left-full w-8 h-0.5 bg-black/10"/>}
                <div className="p-4 rounded-2xl border border-black/10 bg-white/70">
                  <div className="text-lg font-semibold">{f.name}</div>
                  <div className="text-xs text-black/60 uppercase tracking-wide">{f.period}</div>
                  <p className="text-sm text-black/70 mt-2">{f.note}</p>
                </div>
              </div>
            ))}
          </div>
          <p className="mt-4 text-xs text-black/60">√Ä remplacer par une g√©n√©alogie sourc√©e (GEDCOM ‚Üí JSON) avec liens vers chartes et rep√®res chronologiques.</p>
        </Card>
      );
    }

    function App(){
      const [tab, setTab] = React.useState('carte');
      const [era, setEra] = React.useState('all');
      return (
        <div>
          <header className="sticky top-0 z-30 backdrop-blur bg-[rgba(255,255,255,0.65)] border-b border-black/10">
            <div className="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between gap-4">
              <div>
                <h1 className="text-xl md:text-2xl font-bold tracking-tight">S√©chilienne ‚Äî Des fondations √† 1815</h1>
                <p className="text-xs md:text-sm text-black/60">Carte ‚Ä¢ Frise ‚Ä¢ Maisons seigneuriales ‚Ä¢ Focus autonomie locale</p>
              </div>
              <nav className="flex items-center gap-1">
                {[
                  { id:'carte', label:'Carte' },
                  { id:'frise', label:'Frise' },
                  { id:'genea', label:'Maisons' },
                  { id:'focus', label:'Focus' },
                ].map(t => (
                  <button key={t.id} className={`px-3 py-2 rounded-xl text-sm border transition ${tab===t.id ? 'bg-black text-white border-black shadow' : 'bg-white/70 border-black/10 hover:bg-white'}`} onClick={() => setTab(t.id)}>{t.label}</button>
                ))}
              </nav>
            </div>
          </header>

          <div className="mx-auto max-w-6xl px-4 mt-4">
            <Card className="p-3">
              <div className="flex flex-wrap items-center gap-2">
                <span className="text-sm text-black/60 mr-1">Filtrer la p√©riode :</span>
                {ERAS.map(e => <Pill key={e.id} active={era===e.id} onClick={() => setEra(e.id)}>{e.label}</Pill>)}
              </div>
            </Card>
          </div>

          <main className="mx-auto max-w-6xl px-4 py-6 space-y-6">
            {tab==='carte' && <CarteLeaflet pois={POIS}/>} 
            {tab==='frise' && <Frise events={EVENTS} eraFilter={era}/>} 
            {tab==='genea' && <Genealogies families={FAMILIES}/>} 
            {tab==='focus' && <FocusAutonomie/>} 

            <Card className="p-4 md:p-6">
              <SectionTitle icon={<span>üß≠</span>} title="M√©thodologie & sources (√† int√©grer)" subtitle="√Ä compl√©ter avant publication d√©finitive"/>
              <ul className="mt-4 grid md:grid-cols-3 gap-3 text-sm text-black/80 list-disc list-inside">
                <li>Inventaire des tron√ßons de <strong>voie romaine</strong> (photos, coords, bibliographie).</li>
                <li><strong>Chartes et hommages</strong> pour Alleman ‚Üí Simiane ‚Üí du Mottet.</li>
                <li>Contexte du <strong>Transport du Dauphin√© (1349)</strong> avec impacts locaux.</li>
                <li>Dossiers <strong>Lesdigui√®res</strong> (Vizille) et interactions avec S√©chilienne.</li>
                <li>Archives communales : 1789‚Äì1793 (<strong>biens nationaux</strong>, d√©lib√©rations).</li>
                <li>Encadr√© <strong>7 mars 1815</strong> : Route Napol√©on (Laffrey) et perception locale.</li>
              </ul>
              <div className="mt-4 text-xs text-black/60">Les mentions ¬´ √† sourcer ¬ª signalent des points √† v√©rifier dans les archives (ADI, AHPV, bibliographie locale) avant mise en ligne officielle.</div>
            </Card>
          </main>

          <footer className="mx-auto max-w-6xl px-4 pb-10 text-xs text-black/50">Gabarit ¬© 2025 ‚Äî Commune de S√©chilienne / AHPV ‚Äî Focus jusqu‚Äôen 1815 ‚Äî React UMD + Leaflet + Tailwind (sans build).</footer>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App/>);
  </script>
</body>
</html>
